<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Final Project</title>
    <style>
        canvas {
            display: block;
            margin: 10px auto;
            width: 80%;
            height: 600px;
        }
    </style>

    <script src="./js/three.js"></script>
    <script src="./js/OrbitControls.js"></script>
    <script src="./js/SceneUtils.js"></script>

</head>

<body>
    <center><h1>Cat</h1></center>
    <script>
    
    function setupCamera(cameraParameters) {
      // set up an abbreviation 
      var cp = cameraParameters;
      // create an initial camera with the desired shape
      var camera = new THREE.PerspectiveCamera(cp.fov, cp.aspectRatio, cp.near, cp.far);
      // set the camera location and orientation
      camera.position.set(cp.eyeX, cp.eyeY, cp.eyeZ);
      camera.up.set(cp.upX, cp.upY, cp.upZ);
      camera.lookAt(new THREE.Vector3(cp.atX, cp.atY, cp.atZ));
      return camera;
    }

    function render() {
      // a render function; assume global variables scene, renderer, and camera
      renderer.render(scene, camera);
    }

    function setupCameraControls() {
      var cameraControls = new THREE.OrbitControls(camera, canvas);
      state.cameraControls = cameraControls;
      cameraControls.addEventListener('change', render);
      cameraControls.update();
    }

    var state = {};
    var ah = new THREE.AxesHelper(50);
    var viewnumber = 0;
    var cameraParams = {
      near: 1,
      far: 250,
      fov: 75,                // degrees
      aspectRatio: 700 / 500,   // from dimensions of the canvas, see CSS
      atX: 0,
      atY: 0,
      atZ: 0,
      eyeX: 00,
      eyeY: 0,
      eyeZ: 150,
      upX: 0,
      upY: 1,
      upZ: 0
    };

    var scene = new THREE.Scene();

    var renderer = new THREE.WebGLRenderer();
    var canvas = renderer.domElement;
    state.renderer = renderer;  // save this so that others can use it.
    state.scene = scene;        // save this so that others can use it.
    var parent = document.body;
    parent.appendChild(canvas);
    renderer.setSize(750, 500);
    renderer.setClearColor(new THREE.Color(0xcccccc), 1); //darker greyish... it's evening!

    //7. Set up a camera for the scene
    var camera = setupCamera(cameraParams);
    scene.add(camera);

      var ambLight = new THREE.AmbientLight(0xffffff, 1);scene.add(ambLight);

    //set up camera controls so we can use mouse to pan around scene
   

    setupCameraControls();
    var params = {
            headRadius: 3,
            hatHeight: 20, 
            bottomHatRadius: 20.7,
            bottomHatHeight: 10,
            hatRadius: 20,
            hatRotation: 0,
            zPlaneRotation: 0,
            xPlaneRotation:0,
            hatSeg: 1,
            yHeadPosition: 9,
            topRadius: 18
        };

        // colors and materials for the top hat
        var headMaterial = new THREE.MeshBasicMaterial({ color: 0xD08050 });
        var blackMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });
        var goldMaterial = new THREE.MeshBasicMaterial({ color: 0xFFD700});

        function createHat(texture){
            // create and return a Mesh for the hat
            var height = params.hatHeight;
            var radius = params.topRadius;
            var hatGeometry = new THREE.CylinderGeometry(radius, radius, height, 40, params.hatSeg);
            var silkMaterial = new THREE.MeshBasicMaterial({ color: "red"});
            var hatMesh = new THREE.Mesh(hatGeometry, silkMaterial);
            return hatMesh;
        }
        function createBottomHat(texture){
            // create and return a Mesh for the bottom of the hat
            var radius = params.hatRadius
            var height = params.bottomHatHeight
            var hatGeometry = new THREE.CylinderGeometry(radius, radius, height, 40, params.hatSeg);
            var silkMaterial = new THREE.MeshBasicMaterial({ color: "black"});
            var hatMesh = new THREE.Mesh(hatGeometry, silkMaterial);
            return hatMesh;
        }

        function createDesignHat(texture){
            // create and return a Mesh for the design of the hat
            var radius = params.topRadius;
            var hatGeometry = new THREE.CylinderGeometry(radius + 0.1, radius + 0.1, 0.7, 40, params.hatSeg);
            var silkMaterial = new THREE.MeshBasicMaterial({ color: "yellow"});
            var hatMesh = new THREE.Mesh(hatGeometry, silkMaterial);
            return hatMesh;
        }

        var hatframe;
        function addHat(texture){
            // adds all components of hat together
            hatframe = new THREE.Object3D();
            var hat = createHat(texture);
            var bottomHat = createBottomHat(texture);
            var design = createDesignHat(texture);
            hatframe.add(hat);
            hatframe.add(bottomHat);
            hatframe.add(design)
            // calculate position for the center of the head
            hat.position.y = 3.8;
            hat.position.x = 0;
            bottomHat.position.y = 2.3;
            bottomHat.position.x = 0;
            design.position.y = 2.7;
            design.position.x = 0;
            hat.rotation.y = params.hatRotation;
            bottomHat.rotation.y = params.hatRotation;
            scene.add(hatframe);
            renderer.render(scene, camera);
           // TW.render();
        }
         var texture = 1
         addHat(texture);

      //   const geometry = new THREE.BoxGeometry( 30,30, 30 ); 
      //    const material = new THREE.MeshBasicMaterial( {color: 0x00ff00} ); 
      //    const cube = new THREE.Mesh( geometry, material ); 
      //    scene.add( cube );
</script>
<!-- <canvas width="2156" height="600" style="width: 2156px; height: 600px;"></canvas> -->

</body>

</html>